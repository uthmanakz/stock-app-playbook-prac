- name: Installing Prometheus and Grafana in a container
  become: true 
  hosts: dev_monitor
  gather_facts: true 

  tasks:
   - name: Install  docker
     yum:
      name: docker
      state: present

   - name: Install  docker
     service:
      name: docker
      state: started
   

   - name: Install Docker-Compose
     shell: |
      curl -L https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m) \
      -o /usr/local/bin/docker-compose
      chmod +x /usr/local/bin/docker-compose

   - name: Running Prometheus
     yum: 
      name: git
      state: present

   - name: Running Prometheus
     git: 
      repo: 'https://github.com/uthmanakz/docker-folder.git'
      dest: /home/ec2-user/docker-folder
    